% ref: https://tex.stackexchange.com/a/570639
\documentclass[preview,varwidth=\maxdimen,border=10pt]{standalone}
\usepackage[linguistics]{forest}
\usepackage{array,lplfitch}
\newcolumntype{C}[1]{>{\centering $}p{#1}<{$}}
\forestset{
  declare toks={from}{},
  declare toks={idx}{},
  declare toks register={claim},
  declare boolean={align me}{0},
  declare dimen={my width}{0pt},
  declare dimen register={lmeas},
  declare dimen register={rmeas},
  lmeas/.pgfmath=width("99."),
  rmeas/.pgfmath=width("(99)"),
  proof/.style={
    for tree={math content},
    for root=align me,
    before typesetting nodes={
      if claim={}{}{
        replace by/.process={Rw{claim}{[##1,math content,append]}},
        no edge,
        before computing xy={l'=2\baselineskip}
      }
    },
    where n children=1{
      !1.no edge,
      before computing xy={!1.l'=\baselineskip}
    }{},
    for root={align me},
    where n children>=2{
      for children={align me}
    }{},
    before packing={
      where align me={
        tempdima/.max={>{OOw2+d}{max x}{min x}{##1-##2}}{
          walk and save={temptoksa}{
            current,
            until={>O_=!{n children}{1}}{first,typeset node}
          }
        },
        for nodewalk={load=temptoksa}{
          my width/.register=tempdima,
          typeset node
        }
      }{},
      for tree={
        tempcounta=idx,
        align=p{\foresteregister{lmeas}}C{\foresteoption{my width}}p{\foresteregister{rmeas}},
        content/.process={
          OR OSl+tt= ? w w3 {content}{tempcounta}{from}{}{}
          {(##1)}{##2.\quad & ##1\quad & ##3}
        },
        typeset node
      }
    },
    close/.style={
      label={[xshift=-2.5pt]below:$\times$}
    }
  }
}
\begin{document}
\begin{forest}
  proof,
  claim=\vdash (p \lor (q \land r)) \liff ((p \lor q) \land (p \lor r))
  [\lnot ((p \lor (q \land r)) \liff ((p \lor q) \land (p \lor r))),idx=1
    [p \lor (q \land r),idx=2,from=1
      [\lnot ((p \lor q) \land (p \lor r)),idx=3,from=1
        [\lnot (p \lor q),idx=6,from=3
          [\lnot p,idx=8,from=6
            [\lnot q,idx=9,from=6
              [p,idx=10,from=2,close]
              [q \land r,idx=11,from=2
                [q,idx=12,from=11
                  [r,idx=13,from=11,close]
                ]
              ]
            ]
          ]
        ]
        [\lnot (p \lor r),idx=7,from=3
          [\lnot p,idx=14,from=7
            [\lnot r,idx=15,from=7
              [p,idx=16,from=2,close]
              [q \land r,idx=17,from=2
                [q,idx=18,from=17
                  [r,idx=19,from=17,close]
                ]
              ]
            ]
          ]
        ]
      ]
    ]
    [(p \lor q) \land (p \lor r),idx=4,from=1
      [\lnot (p \lor (q \land r)),idx=5,from=1
        [\lnot p,idx=20,from=5
          [\lnot (q \land r),idx=21,from=5
            [p \lor q,idx=22,from=4
              [p \lor r,idx=23,from=4
                [p,idx=24,from=23,close]
                [r,idx=25,from=23
                  [p,idx=26,from=22,close]
                  [q,idx=27,from=22
                    [\lnot q,idx=28,from=21,close]
                    [\lnot r,idx=29,from=21,close]
                  ]
                ]
              ]
            ]
          ]
        ]
      ]
    ]
  ]
\end{forest}
\end{document}
